---
name: Titanium.Network.TCPSocket
extends: Titanium.Proxy
deprecated:
    since: "1.7.0"
    removed: "9.0.0"
    notes: |
        Use [Titanium.Network.Socket.TCP](Titanium.Network.Socket.TCP) where possible.
summary: |
    The TCPSocket instance returned from <Titanium.Network.createTCPSocket>.  This object
    represents a socket which either listens locally on the device for connections,
    or connects to a remote machine.
since: "1.2.0"
platforms: [iphone, ipad]
methods:
  - name: close
    summary: close the socket
  - name: connect
    summary: connect the scocket to a TCP server
  - name: listen
    summary: set up the socket to receive connections
  - name: write
    summary: write data to the socket, if the mode is WRITE_MODE or READ_WRITE_MODE
    parameters:
      - name: data
        summary: either a string or blob object representing the data to be transferred
        type: [Object,String]
      - name: sendTo
        summary: the socket reference to send the data to.  Default is to send to all connected sockets
        type: Number
events:
  - name: read
    summary: new data was read off the socket
    properties:
      - name: from
        summary: the reference for the socket that data was retrieved from
        type: Number
      - name: data
        summary: a blob representing the data read, can be interpreted via toString
        type: Titanium.Blob
  - name: readError
    summary: an error occured when reading
    properties:
      - name: success
        summary: Indicates a successful operation. Returns `false`.
        type: Boolean

      - name: error
        summary: Error message, if any returned. May be undefined.
        type: String
    
      - name: code
        summary: |
            Error code.
            If the error was generated by the operating system, that system's error value
            is used. Otherwise, this value will be -1.
        type: Number
  - name: writeError
    summary: an error occured when writing
    properties:
      - name: success
        summary: Indicates a successful operation. Returns `false`.
        type: Boolean

      - name: error
        summary: Error message, if any returned. May be undefined.
        type: String
    
      - name: code
        summary: |
            Error code.
            If the error was generated by the operating system, that system's error value
            is used. Otherwise, this value will be -1.
        type: Number
properties:
  - name: hostName
    summary: the host name to connect to.  Must be <Titanium.Network.INADDR_ANY> or an identifier for the local device in order to listen
    type: String
  - name: isValid
    summary: whether or not the socket is valid
    type: Boolean
  - name: mode
    summary: the socket's mode
    type: Number
  - name: port
    summary: the port to connect/listen on
    type: Number
  - name: stripTerminator
    summary: strip terminating null character when sending string data; default is false
    type: Boolean
description: Sockets are nontrivial; it is recommended that anyone using them be familiar with the basics of BSD sockets.  All sockets use TCP connections, and are asynchronous for read operations, so your program should be ready to receive 'read' events at any point.  Socket references cannot be transferred to socket objects, and vice-versa - socket references are an internal mechanism which is used only to determine which sockets to send data to and read data from.  For listening sockets, it is highly recommended that you use the <Titanium.Network.INADDR_ANY> constant as the host name.  If a window containing a socket is closed, the socket MUST be closed also unless you intend to continue to receive data, otherwise the socket will consume resources (and potentially cause conflicts with opening the window again, if a listener) until the program is restarted.  Be aware of the differences between the listen() and connect() functions; attempting to use one when you mean the other may result in errors, unpredictable behavior, or both.
